(this["webpackJsonpmemcrab-test"]=this["webpackJsonpmemcrab-test"]||[]).push([[0],{13:function(e,t,n){e.exports={tableWrapper:"Array_tableWrapper__3r1cA",table:"Array_table__1EVmf",addCell:"Array_addCell__3PXuk"}},17:function(e,t,n){e.exports={removeButton:"ArrayRow_removeButton__1w377 AddLineButton_button__16NY0",removeButtonTd:"ArrayRow_removeButtonTd__1yrTV Array_addCell__3PXuk"}},2:function(e,t,n){e.exports={formWrapper:"Inputs_formWrapper__3qvIq",form:"Inputs_form__2CPZL",formTitle:"Inputs_formTitle__8nqar",inputWrapper:"Inputs_inputWrapper__1ECfZ",label:"Inputs_label__2t_1J",input:"Inputs_input__u-M3Q",submitButton:"Inputs_submitButton__BGAA0"}},22:function(e,t,n){e.exports={simpleTd:"ArrayCell_simpleTd__3ouJW"}},23:function(e,t,n){e.exports={sumCell:"SumCell_sumCell__1CXIY"}},24:function(e,t,n){e.exports={avarageTd:"AvarageRow_avarageTd__ZvmOI"}},25:function(e,t,n){e.exports={button:"AddLineButton_button__16NY0"}},26:function(e,t,n){e.exports={container:"App_container__1wjkN"}},27:function(e,t,n){e.exports=n(40)},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(12),o=n.n(u),l=n(3),c=n(4),i=n(5),s=n(7),m=n(6),d=n(8),f=n(1),p={REMOVE_LINE:"REMOVE_LINE",ADD_LINE:"ADD_LINE",SAVE_ARRAY:"SAVE_ARRAY",INCREASE:"INCREASE",SAVE_PARAMS:"SAVE_PARAMS",ILLUMINATE:"ILLUMINATE"},v=n(19),b=function(e,t){for(var n=[],a=0;a<e;a++){n[a]={id:v(),cells:[]};for(var r=0;r<t;r++)n[a].cells[r]={id:v(),amount:Math.floor(1e3*Math.random())}}return n},E=n(2),_=n.n(E),h=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),u=0;u<a;u++)r[u]=arguments[u];return(n=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={m:"",n:"",x:""},n.inputHandler=function(e){var t=e.target,a=t.id,r=t.value;switch(a){case"m":n.setState((function(e){return Object(l.a)({},e,{m:r})}));break;case"n":n.setState((function(e){return Object(l.a)({},e,{n:r})}));break;case"x":n.setState((function(e){return Object(l.a)({},e,{x:r})}))}},n.submitHandler=function(e){e.preventDefault();var t=n.state,a=t.m,r=t.n,u=t.x,o=n.props,l=o.onSaveParams,c=o.onSaveArray;a<=0||r<=0||u<0?alert("array parameters must be more then 0"):(c(b(a,r)),l({n:r,x:u}),n.setState({m:"",n:"",x:""}))},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.m,n=e.n,a=e.x;return r.a.createElement("div",{className:_.a.formWrapper},r.a.createElement("h1",{className:_.a.formTitle},"Enter table parameters"),r.a.createElement("form",{className:_.a.form,onSubmit:this.submitHandler},r.a.createElement("div",{className:_.a.inputWrapper},r.a.createElement("label",{htmlFor:"m",className:_.a.label},"Lines quantity:"),r.a.createElement("input",{className:_.a.input,type:"number",name:"lines",id:"m",onChange:this.inputHandler,value:t,placeholder:"0"})),r.a.createElement("div",{className:_.a.inputWrapper},r.a.createElement("label",{htmlFor:"n",className:_.a.label},"Columns quantity:"),r.a.createElement("input",{className:_.a.input,type:"number",name:"columns",id:"n",onChange:this.inputHandler,value:n,placeholder:"0"})),r.a.createElement("div",{className:_.a.inputWrapper},r.a.createElement("label",{htmlFor:"m",className:_.a.label},"Illuminated cells quantity:"),r.a.createElement("input",{className:_.a.input,type:"number",name:"illuminate",id:"x",onChange:this.inputHandler,value:a,placeholder:"0"})),r.a.createElement("div",null,r.a.createElement("input",{className:_.a.submitButton,type:"submit",value:"Generate"}))))}}]),t}(a.Component),y=Object(f.b)(null,(function(e){return{onSaveArray:function(t){return e(function(e){return{type:p.SAVE_ARRAY,payload:{array:e}}}(t))},onSaveParams:function(t){return e(function(e){return{type:p.SAVE_PARAMS,payload:{params:e}}}(t))}}}))(h),A=n(21),O=function(e){return e.array},N=function(e){return Number(e.params.n)},I=function(e){return Number(e.params.x)},j=function(e){return e.illuminated},g=function(e,t){return O(e).find((function(e){return e.id===t}))},S=function(e,t,n){return g(e,n).cells.find((function(e){return e.id===t}))},R=function(e,t){return g(e,t).cells.reduce((function(e,t){return e+t.amount}),0)},C=n(19),L=Object(A.a)([O,N],(function(e,t){for(var n=[],a=0;a<t;a++){for(var r=0,u=0;u<e.length;u++)r+=e[u].cells[a].amount;n.push({id:C(),amount:(r/e.length).toFixed(2)})}return n})),H=n(11),w=n(10),k=function(e,t,n){var a=e.reduce((function(e,t){return[].concat(Object(w.a)(e),Object(w.a)(t.cells))}),[]);n<a.length-1&&a.sort((function(e,n){return Math.abs(e.amount-t.amount)-Math.abs(n.amount-t.amount)}));var r=a.slice(0,n+1).reduce((function(e,t){return Object(l.a)({},e,Object(H.a)({},t.id,!0))}),{});return Object(l.a)(Object(H.a)({},t.id,!0),r)},M=n(22),T=n.n(M),x=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),u=0;u<a;u++)r[u]=arguments[u];return(n=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).hoverOnHandler=function(){var e=n.props,t=e.array,a=e.numberQty,r=e.element;(0,e.onHover)(k(t,r,a))},n.hoverOffHandler=function(){(0,n.props.onHover)({})},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.props,a=n.element,r=n.illuminated,u=n.sumHover,o=n.id;return e.sumHover!==u||(e.element.amount!==a.amount||e.illuminated[o]!==r[o])}},{key:"render",value:function(){console.log("td");var e=this.props,t=e.element,n=e.sum,a=e.sumHover,u=e.onIncrease,o=e.illuminated,l=e.id,c={background:"linear-gradient(110deg,#eee 0%,#e3e3e3 10%,#fff 20%,#fff 25%,#f0f0f0 26%,#fff 28%,#ddd 55%,#eee 100%)"},i=t.amount/n*100;return o[l]&&(c.background="linear-gradient(110deg, #f90c04 0%, #ed413b 10%, #fff 20%, #fff 25%, #f0f0f0 26%, #fff 28%, #f53d37 55%, #f90c04 100%)"),a&&(c.background="linear-gradient(to top, #fff200, #1e9600 ".concat(i,"%, transparent ").concat(i,"%)")),r.a.createElement("td",{className:T.a.simpleTd,onClick:u,id:l,onMouseEnter:this.hoverOnHandler,onMouseLeave:this.hoverOffHandler,style:c},a?i.toFixed(1)+"%":t.amount)}}]),t}(a.Component),V=Object(f.b)((function(e,t){var n=t.id,a=t.lineId;return{array:O(e),numberQty:I(e),illuminated:j(e),element:S(e,n,a),sum:R(e,a)}}),(function(e,t){var n=t.id,a=t.lineId;return{onIncrease:function(){return e(function(e,t){return{type:p.INCREASE,payload:{id:e,lineId:t}}}(n,a))},onHover:function(t){return e({type:p.ILLUMINATE,payload:{illuminated:t}})}}}))(x),D=n(23),B=n.n(D),W=Object(f.b)((function(e,t){var n=t.id;return{sum:R(e,n)}}))(r.a.memo((function(e){var t=e.sum,n=e.onHover;return r.a.createElement("td",{onMouseEnter:n,onMouseLeave:n,className:B.a.sumCell},t)}))),P=n(17),U=n.n(P),X=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),u=0;u<a;u++)r[u]=arguments[u];return(n=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={sumHover:!1},n.hoverHandler=function(){n.setState((function(e){return{sumHover:!e.sumHover}}))},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.state.sumHover;return t.sumHover!==n}},{key:"render",value:function(){console.log("row");var e=this.props,t=e.line,n=e.onRemove,a=e.id,u=this.state.sumHover;return r.a.createElement("tr",{id:a},t.cells.map((function(e){return r.a.createElement(V,{sumHover:u,key:e.id,id:e.id,lineId:a})})),r.a.createElement(W,{onHover:this.hoverHandler,id:a}),r.a.createElement("td",{className:U.a.removeButtonTd},r.a.createElement("button",{className:U.a.removeButton,onClick:n},"\xd7")))}}]),t}(a.Component),Y=Object(f.b)((function(e,t){var n=t.id;return{line:g(e,n)}}),(function(e,t){return{onRemove:function(){return e((n=t.id,{type:p.REMOVE_LINE,payload:{id:n}}));var n}}}))(X),q=n(24),F=n.n(q),Q=Object(f.b)((function(e){return{averageRow:L(e)}}))((function(e){var t=e.averageRow;return r.a.createElement("tr",null,t.map((function(e){return r.a.createElement("td",{className:F.a.avarageTd,key:e.id,id:e.id},e.amount)})))})),J=n(25),Z=n.n(J),G=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),u=0;u<a;u++)r[u]=arguments[u];return(n=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).addHandler=function(){var e=n.props,t=e.lineLength;(0,e.onAdd)(b(1,t))},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("button",{className:Z.a.button,onClick:this.addHandler},"+")}}]),t}(a.Component),z=Object(f.b)((function(e){return{lineLength:N(e)}}),(function(e){return{onAdd:function(t){return e(function(e){return{type:p.ADD_LINE,payload:{newLine:e}}}(t))}}}))(G),K=n(13),$=n.n(K),ee=Object(f.b)((function(e){return{array:O(e),columnQty:N(e)}}))(r.a.memo((function(e){var t=e.array,n=e.columnQty;return console.log("array"),t.length>0&&r.a.createElement("div",{className:$.a.tableWrapper},r.a.createElement("table",{className:$.a.table},r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement(Y,{key:e.id,id:e.id})})),r.a.createElement(Q,null),r.a.createElement("tr",null,r.a.createElement("td",{className:$.a.addCell,colSpan:n},r.a.createElement(z,null))))))}))),te=n(26),ne=n.n(te),ae=function(){return r.a.createElement("div",{className:ne.a.container},r.a.createElement(y,null),r.a.createElement(ee,null))},re=n(9),ue=function(e,t){switch(t.type){case p.ADD_LINE:return t.payload.newLine;case p.REMOVE_LINE:return e.id!==t.payload.id;case p.INCREASE:return e.id===t.payload.lineId?Object(l.a)({},e,{cells:e.cells.map((function(e){return function(e,t){var n=t.type,a=t.payload;switch(n){case p.INCREASE:return e.id===a.id?Object(l.a)({},e,{amount:e.amount+1}):e}}(e,t)}))}):e}},oe=Object(re.b)({array:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.ADD_LINE:return[].concat(Object(w.a)(e),Object(w.a)(ue(void 0,t)));case p.REMOVE_LINE:return e.filter((function(e){return ue(e,t)}));case p.SAVE_ARRAY:return t.payload.array;case p.INCREASE:return e.map((function(e){return ue(e,t)}));default:return e}},params:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.SAVE_PARAMS:return t.payload.params;default:return e}},illuminated:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.ILLUMINATE:return t.payload.illuminated;default:return e}}}),le=Object(re.c)(oe,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());o.a.render(r.a.createElement(f.a,{store:le},r.a.createElement(ae,null)),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.b63cf7e9.chunk.js.map